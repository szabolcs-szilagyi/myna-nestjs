{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/home/balazs/ReactJs/myna/pages/my-account.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { API_SERVER } from '../src/constants';\nimport Cookies from 'universal-cookie';\nimport Header from '../components/Header';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Ping from '../components/Ping';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport \"../src/styles.css\";\nvar cookies = new Cookies();\nvar session = cookies.get('session');\n\nvar Index = /*#__PURE__*/function (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      myEmail: '',\n      loginOrEdit: 'login',\n      inputEmail: '',\n      loginEmail: '',\n      loginToken: '',\n      textOnLoginButton: 'SEND THE LOGIN LINK'\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.amILoggedIn = _this.amILoggedIn.bind(_assertThisInitialized(_this));\n    _this.sendLogin = _this.sendLogin.bind(_assertThisInitialized(_this));\n    _this.createToken = _this.createToken.bind(_assertThisInitialized(_this));\n    _this.sendMail = _this.sendMail.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        inputEmail: event.target.value\n      }, function () {});\n    }\n  }, {\n    key: \"amILoggedIn\",\n    value: function amILoggedIn() {\n      var _this2 = this;\n\n      fetch(API_SERVER + 'listen.php?part=amiloggedin&sessiontoken=' + session).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp = data['email'];\n\n        if (tmp != \"nodata\") {\n          _this2.setState({\n            myEmail: tmp,\n            loginOrEdit: 'edit'\n          });\n        }\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"sendLogin\",\n    value: function sendLogin() {\n      setTimeout(this.createToken, 100);\n      setTimeout(this.sendMail, 500);\n    }\n  }, {\n    key: \"createToken\",\n    value: function createToken() {\n      var _this3 = this;\n\n      fetch(API_SERVER + 'listen.php?part=loginmail&email=' + this.state.inputEmail).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp1 = data['email'];\n        var tmp2 = data['logintoken'];\n\n        _this3.setState({\n          loginEmail: tmp1,\n          loginToken: tmp2\n        });\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"sendMail\",\n    value: function sendMail() {\n      fetch(API_SERVER + 'amazon-ses-smtp.php?part=login&email=' + this.state.loginEmail + '&token=' + this.state.loginToken, {\n        mode: 'no-cors'\n      });\n      this.setState({\n        textOnLoginButton: 'SENT'\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.amILoggedIn();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loginOrEdit == 'login') {\n        return __jsx(Container, {\n          fluid: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 9\n          }\n        }, __jsx(Header, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }\n        }), __jsx(Nav, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }\n        }), __jsx(Ping, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer50px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }\n        }), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-12 ce capitalLetters\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }\n        }, __jsx(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }\n        }, __jsx(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }\n        }, \"Login to your account\")), __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }\n        }, \"We send an auto-login link to your email address.\"), __jsx(\"div\", {\n          className: \"spacer50px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"loginEmail\",\n          type: \"text\",\n          value: this.state.inputEmail,\n          onChange: this.handleChange,\n          maxLength: \"128\",\n          placeholder: \"enter your email here\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer50px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"noBorder mediumFont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }\n        }, __jsx(\"button\", {\n          type: \"button\",\n          className: \"cartButton\",\n          onClick: this.sendLogin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 54\n          }\n        }, this.state.textOnLoginButton)))));\n      }\n\n      if (this.state.loginOrEdit == 'edit') {\n        return __jsx(Container, {\n          fluid: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 9\n          }\n        }, __jsx(Header, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }\n        }), __jsx(Nav, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 11\n          }\n        }), __jsx(Ping, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }\n        }), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-12 ce capitalLetters\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }\n        }, __jsx(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }\n        }, __jsx(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }\n        }, \"Your account\")), __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        }, \"Please fill your details\"), __jsx(\"div\", {\n          className: \"spacer25px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.firstName,\n          onChange: this.handleChange1,\n          maxLength: \"128\",\n          placeholder: \"enter your firstname\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.lastName,\n          onChange: this.handleChange2,\n          maxLength: \"128\",\n          placeholder: \"enter your lastname\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.birthday,\n          onChange: this.handleChange3,\n          maxLength: \"10\",\n          placeholder: \"your lastname (YYYY-MM-DD)\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }\n        }), __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }\n        }, \"Delivery address\"), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dName,\n          onChange: this.handleChange4,\n          maxLength: \"128\",\n          placeholder: \"name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dAddress1,\n          onChange: this.handleChange5,\n          maxLength: \"128\",\n          placeholder: \"address line 1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dAddress2,\n          onChange: this.handleChange6,\n          maxLength: \"128\",\n          placeholder: \"address line 2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dCity,\n          onChange: this.handleChange7,\n          maxLength: \"128\",\n          placeholder: \"city\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dState,\n          onChange: this.handleChange8,\n          maxLength: \"128\",\n          placeholder: \"state\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dZip,\n          onChange: this.handleChange9,\n          maxLength: \"64\",\n          placeholder: \"zip\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dCountry,\n          onChange: this.handleChange10,\n          maxLength: \"64\",\n          placeholder: \"country\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }\n        }), __jsx(\"input\", {\n          className: \"userDetails\",\n          type: \"text\",\n          value: this.state.dComment,\n          onChange: this.handleChange11,\n          maxLength: \"256\",\n          placeholder: \"comment\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"spacer10px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }\n        }), __jsx(\"div\", {\n          className: \"noBorder mediumFont\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }\n        }, __jsx(\"button\", {\n          type: \"button\",\n          className: \"cartButton\",\n          onClick: this.sendLogin,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 54\n          }\n        }, this.state.textOnLoginButton)))));\n      }\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport { Index as default };","map":{"version":3,"sources":["/home/balazs/ReactJs/myna/pages/my-account.js"],"names":["React","useState","ReactDOM","API_SERVER","Cookies","Header","Nav","Footer","Ping","Container","Button","cookies","session","get","Index","props","state","myEmail","loginOrEdit","inputEmail","loginEmail","loginToken","textOnLoginButton","handleChange","bind","amILoggedIn","sendLogin","createToken","sendMail","event","setState","target","value","fetch","then","response","json","output","data","tmp","error","console","log","message","setTimeout","tmp1","tmp2","mode","firstName","handleChange1","lastName","handleChange2","birthday","handleChange3","dName","handleChange4","dAddress1","handleChange5","dAddress2","handleChange6","dCity","handleChange7","dState","handleChange8","dZip","handleChange9","dCountry","handleChange10","dComment","handleChange11","Component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport {API_SERVER as API_SERVER} from '../src/constants';\nimport Cookies from 'universal-cookie';\nimport Header from '../components/Header';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Ping from '../components/Ping';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport \"../src/styles.css\";\nconst cookies = new Cookies();\nconst session = cookies.get('session');\n\nexport default class Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      myEmail: '',\n      loginOrEdit: 'login',\n      inputEmail: '',\n      loginEmail: '',\n      loginToken: '',\n      textOnLoginButton: 'SEND THE LOGIN LINK'\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.amILoggedIn = this.amILoggedIn.bind(this);\n    this.sendLogin = this.sendLogin.bind(this);\n    this.createToken = this.createToken.bind(this);\n    this.sendMail = this.sendMail.bind(this);\n\n  }\n\n  handleChange (event) {\n    this.setState({inputEmail: event.target.value}, () => { });\n  }\n  amILoggedIn () {\n    fetch(API_SERVER + 'listen.php?part=amiloggedin&sessiontoken=' + session)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp = data['email'];\n      if (tmp != \"nodata\") {\n        this.setState({ myEmail: tmp, loginOrEdit: 'edit' });\n      }\n    })\n    .catch(error => console.log(error.message));\n  }\n  sendLogin () {\n    setTimeout(this.createToken, 100);\n    setTimeout(this.sendMail, 500);\n  }\n  createToken () {\n    fetch(API_SERVER + 'listen.php?part=loginmail&email=' + this.state.inputEmail)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp1 = data['email'];\n      let tmp2 = data['logintoken'];\n      this.setState({ loginEmail: tmp1, loginToken: tmp2 });\n    })\n    .catch(error => console.log(error.message));\n  }\n  sendMail () {\n    fetch(API_SERVER + 'amazon-ses-smtp.php?part=login&email=' + this.state.loginEmail + '&token=' + this.state.loginToken, {mode: 'no-cors'});\n    this.setState({ textOnLoginButton: 'SENT' });\n  }\n\n  componentDidMount() {\n    this.amILoggedIn ();\n  }\n  render() {\n    if (this.state.loginOrEdit == 'login') {\n      return (\n        <Container fluid>\n          <Header />\n          <Nav />\n          <Ping />\n            <div className=\"spacer50px\" />\n            <div className=\"row\">\n              <div className=\"col-md-12 ce capitalLetters\">\n                <h2><strong>Login to your account</strong></h2>\n                <p>We send an auto-login link to your email address.</p>\n                <div className=\"spacer50px\" />\n                <input className=\"loginEmail\" type=\"text\" value={this.state.inputEmail} onChange={this.handleChange} maxLength=\"128\" placeholder=\"enter your email here\" />\n                <div className=\"spacer50px\" />\n                <div className=\"noBorder mediumFont\"><button type=\"button\" className=\"cartButton\" onClick={this.sendLogin}>{this.state.textOnLoginButton}</button></div>\n              </div>\n            </div>\n        </Container>\n      );\n    }\n    if (this.state.loginOrEdit == 'edit') {\n      return (\n        <Container fluid>\n          <Header />\n          <Nav />\n          <Ping />\n            <div className=\"spacer10px\" />\n            <div className=\"row\">\n              <div className=\"col-md-12 ce capitalLetters\">\n                <h2><strong>Your account</strong></h2>\n                <p>Please fill your details</p>\n                <div className=\"spacer25px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.firstName} onChange={this.handleChange1} maxLength=\"128\" placeholder=\"enter your firstname\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.lastName} onChange={this.handleChange2} maxLength=\"128\" placeholder=\"enter your lastname\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.birthday} onChange={this.handleChange3} maxLength=\"10\" placeholder=\"your lastname (YYYY-MM-DD)\" />\n                <div className=\"spacer10px\" />\n                <p>Delivery address</p>\n                <input className=\"userDetails\" type=\"text\" value={this.state.dName} onChange={this.handleChange4} maxLength=\"128\" placeholder=\"name\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dAddress1} onChange={this.handleChange5} maxLength=\"128\" placeholder=\"address line 1\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dAddress2} onChange={this.handleChange6} maxLength=\"128\" placeholder=\"address line 2\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dCity} onChange={this.handleChange7} maxLength=\"128\" placeholder=\"city\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dState} onChange={this.handleChange8} maxLength=\"128\" placeholder=\"state\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dZip} onChange={this.handleChange9} maxLength=\"64\" placeholder=\"zip\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dCountry} onChange={this.handleChange10} maxLength=\"64\" placeholder=\"country\" />\n                <div className=\"spacer10px\" />\n                <input className=\"userDetails\" type=\"text\" value={this.state.dComment} onChange={this.handleChange11} maxLength=\"256\" placeholder=\"comment\" />\n                <div className=\"spacer10px\" />\n                <div className=\"noBorder mediumFont\"><button type=\"button\" className=\"cartButton\" onClick={this.sendLogin}>{this.state.textOnLoginButton}</button></div>\n              </div>\n            </div>\n        </Container>\n      );\n    }\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}