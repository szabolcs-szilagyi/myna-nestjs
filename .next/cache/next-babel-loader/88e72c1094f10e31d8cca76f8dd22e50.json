{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/home/balazs/ReactJs/myna/pages/checkout.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom'; //import { useRouter } from 'next/router';\n\nimport { API_SERVER } from '../src/constants';\nimport Cookies from 'universal-cookie'; //import UserMenu from '../components/UserMenu';\n\nimport Header from '../components/Header';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Ping from '../components/Ping';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button'; //import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport \"../src/styles.css\";\nvar cookies = new Cookies();\nvar session = cookies.get('session');\n\nvar Index = /*#__PURE__*/function (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      myEmail: '',\n      loggedIn: 'no',\n      activeCoupon: '',\n      products: [],\n      productsImg: [],\n      productsPrice: [],\n      inCart: '0',\n      productRender: [],\n      trash: './trash.png'\n    };\n    _this.amILoggedIn = _this.amILoggedIn.bind(_assertThisInitialized(_this));\n    _this.getProductsInCart = _this.getProductsInCart.bind(_assertThisInitialized(_this));\n    _this.getImagesPrice = _this.getImagesPrice.bind(_assertThisInitialized(_this));\n    _this.getInCart = _this.getInCart.bind(_assertThisInitialized(_this));\n    _this.createProductRender = _this.createProductRender.bind(_assertThisInitialized(_this));\n    _this.addImages = _this.addImages.bind(_assertThisInitialized(_this));\n    _this.delProductFromCart = _this.delProductFromCart.bind(_assertThisInitialized(_this));\n    _this.reload = _this.reload.bind(_assertThisInitialized(_this));\n    _this.trashHover = _this.trashHover.bind(_assertThisInitialized(_this));\n    _this.trashNormal = _this.trashNormal.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"amILoggedIn\",\n    value: function amILoggedIn() {\n      var _this2 = this;\n\n      fetch(API_SERVER + 'listen.php?part=amiloggedin&sessiontoken=' + session).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp = data['email'];\n\n        if (tmp != \"nodata\") {\n          _this2.setState({\n            myEmail: tmp,\n            loggedIn: 'yes'\n          });\n        } else {\n          window.location.href = \"/my-account\";\n        }\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"getProductsInCart\",\n    value: function getProductsInCart() {\n      var _this3 = this;\n\n      fetch(API_SERVER + 'listen.php?part=getproductsincart&sessiontoken=' + session).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp = data['products'];\n\n        _this3.setState({\n          products: tmp\n        }); //console.log (this.state.products);\n\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"getImagesPrice\",\n    value: function getImagesPrice(e) {\n      var _this4 = this;\n\n      var idName = e;\n      fetch(API_SERVER + 'listen.php?part=getproductdata&productname=' + idName).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp = data['productdetails'];\n        var pic = tmp['pic1'];\n        var price = tmp['productprice'];\n\n        _this4.setState(function (previousState) {\n          return {\n            productsImg: [].concat(_toConsumableArray(previousState.productsImg), [pic])\n          };\n        });\n\n        _this4.setState(function (previousState) {\n          return {\n            productsPrice: [].concat(_toConsumableArray(previousState.productsPrice), [price])\n          };\n        });\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"getInCart\",\n    value: function getInCart() {\n      var _this5 = this;\n\n      fetch(API_SERVER + 'listen.php?part=getproductsnumberincart&sessiontoken=' + session).then(function (response) {\n        return response.json();\n      }).then(function (output) {\n        var data = output;\n        var tmp = data['nr'];\n\n        _this5.setState({\n          inCart: tmp\n        });\n      })[\"catch\"](function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"createProductRender\",\n    value: function createProductRender() {\n      console.log(this.state.products);\n      var nr = this.state.inCart;\n      var prod = this.state.products;\n      var images = this.state.productsImg;\n      var prices = this.state.productsPrice;\n      var idName;\n      var pricc;\n      var id;\n      var hlp;\n      var imgsrc;\n      var imgtmp;\n      var i;\n      var tmp = [];\n\n      for (i = 0; i < nr; i++) {\n        id = prod[i]['id'];\n        idName = prod[i]['idname'];\n        pricc = prices[i];\n        imgtmp = images[i];\n        imgsrc = API_SERVER + 'productphotos/' + imgtmp;\n        console.log(imgtmp);\n        tmp[i] = __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 16\n          }\n        }, __jsx(\"div\", {\n          className: \"row\",\n          key: id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          className: \"col-md-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 51\n          }\n        }, __jsx(\"img\", {\n          className: \"dyn\",\n          src: imgsrc,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 77\n          }\n        })), __jsx(\"div\", {\n          className: \"3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxtContainer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 26\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 58\n          }\n        }, idName))), __jsx(\"div\", {\n          className: \"2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 7\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxtContainer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 26\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 58\n          }\n        }, \"\\u20AC\", pricc))), __jsx(\"div\", {\n          className: \"1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 7\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxtContainer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 26\n          }\n        }, __jsx(\"div\", {\n          className: \"lbtxt navCart\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 58\n          }\n        }, __jsx(\"img\", {\n          onMouseEnter: this.trashHover,\n          onMouseLeave: this.trashNormal,\n          onClick: this.delProductFromCart,\n          src: this.state.trash,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 89\n          }\n        }))))), __jsx(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 240\n          }\n        }));\n      }\n\n      this.setState({\n        productRender: tmp\n      });\n    }\n  }, {\n    key: \"addImages\",\n    value: function addImages() {\n      var nr = this.state.inCart;\n      var prod = this.state.products;\n      var hlp;\n      var i;\n\n      for (i = 0; i < nr; i++) {\n        hlp = prod[i]['idname'];\n        this.getImagesPrice(hlp);\n        console.log(hlp);\n      }\n    }\n  }, {\n    key: \"delProductFromCart\",\n    value: function delProductFromCart(e) {\n      var id = e;\n      fetch(API_SERVER + 'listen.php?part=delproductfromcart&id=' + id + '&sessiontoken=' + session, {\n        mode: 'no-cors'\n      });\n      setTimeout(this.reload, 400);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      window.location.href = \"/chekout\";\n    }\n  }, {\n    key: \"trashHover\",\n    value: function trashHover() {\n      this.setState({\n        trash: './trash-b.png'\n      });\n    }\n  }, {\n    key: \"trashNormal\",\n    value: function trashNormal() {\n      this.setState({\n        trash: './trash.png'\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.getInCart();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.amILoggedIn();\n      this.getProductsInCart();\n      this.getInCart();\n      setTimeout(this.addImages, 250);\n      setTimeout(this.createProductRender, 1500);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 4\n        }\n      }, __jsx(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 7\n        }\n      }), __jsx(Nav, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }\n      }), __jsx(Ping, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"spacer50px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"col-md-12 ce capitalLetters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }\n      }, __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, __jsx(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }, \"Your Loved Pieces\")))), __jsx(\"div\", {\n        className: \"spacer25px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }\n      }), __jsx(\"div\", {\n        className: \"col-md-8\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }\n      }, \"Cart / \", this.state.inCart, \" items\", __jsx(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }\n      }), this.state.productRender), __jsx(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }\n      })), __jsx(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport { Index as default };","map":{"version":3,"sources":["/home/balazs/ReactJs/myna/pages/checkout.js"],"names":["React","useState","ReactDOM","API_SERVER","Cookies","Header","Nav","Footer","Ping","Container","Button","cookies","session","get","Index","props","state","myEmail","loggedIn","activeCoupon","products","productsImg","productsPrice","inCart","productRender","trash","amILoggedIn","bind","getProductsInCart","getImagesPrice","getInCart","createProductRender","addImages","delProductFromCart","reload","trashHover","trashNormal","fetch","then","response","json","output","data","tmp","setState","window","location","href","error","console","log","message","e","idName","pic","price","previousState","nr","prod","images","prices","pricc","id","hlp","imgsrc","imgtmp","i","mode","setTimeout","Component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\n//import { useRouter } from 'next/router';\nimport {API_SERVER as API_SERVER} from '../src/constants';\nimport Cookies from 'universal-cookie';\n//import UserMenu from '../components/UserMenu';\nimport Header from '../components/Header';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Ping from '../components/Ping';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\n//import 'bootstrap/dist/css/bootstrap.min.css';\nimport \"../src/styles.css\";\nconst cookies = new Cookies();\nconst session = cookies.get('session');\n\nexport default class Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      myEmail: '',\n      loggedIn: 'no',\n      activeCoupon: '',\n      products: [],\n      productsImg: [],\n      productsPrice: [],\n      inCart: '0',\n      productRender: [],\n      trash: './trash.png'\n    };\n\n    this.amILoggedIn = this.amILoggedIn.bind(this);\n    this.getProductsInCart = this.getProductsInCart.bind(this);\n    this.getImagesPrice = this.getImagesPrice.bind(this);\n    this.getInCart = this.getInCart.bind(this);\n    this.createProductRender = this.createProductRender.bind(this);\n    this.addImages = this.addImages.bind(this);\n    this.delProductFromCart = this.delProductFromCart.bind(this);\n    this.reload = this.reload.bind(this);\n    this.trashHover = this.trashHover.bind(this);\n    this.trashNormal = this.trashNormal.bind(this);\n\n  }\n\n  amILoggedIn () {\n    fetch(API_SERVER + 'listen.php?part=amiloggedin&sessiontoken=' + session)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp = data['email'];\n      if (tmp != \"nodata\") {\n        this.setState({ myEmail: tmp, loggedIn: 'yes' });\n      } else {\n        window.location.href = \"/my-account\";\n      }\n    })\n    .catch(error => console.log(error.message));\n  }\n  getProductsInCart () {\n    fetch(API_SERVER + 'listen.php?part=getproductsincart&sessiontoken=' + session)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp = data['products'];\n      this.setState({ products: tmp });\n      //console.log (this.state.products);\n    })\n    .catch(error => console.log(error.message));\n  }\n  getImagesPrice (e) {\n    let idName = e;\n    fetch(API_SERVER + 'listen.php?part=getproductdata&productname=' + idName)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp = data['productdetails'];\n      let pic = tmp['pic1'];\n      let price = tmp['productprice'];\n      this.setState(previousState => ({\n        productsImg: [...previousState.productsImg, pic]\n      }));\n      this.setState(previousState => ({\n        productsPrice: [...previousState.productsPrice, price]\n      }));\n    })\n    .catch(error => console.log(error.message));\n  }\n  getInCart () {\n    fetch(API_SERVER + 'listen.php?part=getproductsnumberincart&sessiontoken=' + session)\n    .then(response => response.json())\n\t\t.then(output => {\n      let data = output;\n      let tmp = data['nr'];\n      this.setState({ inCart: tmp });\n    })\n    .catch(error => console.log(error.message));\n  }\n  createProductRender () {\n    console.log (this.state.products);\n    let nr = this.state.inCart;\n    let prod = this.state.products;\n    let images = this.state.productsImg;\n    let prices = this.state.productsPrice;\n    let idName;\n    let pricc;\n    let id;\n    let hlp;\n    let imgsrc;\n    let imgtmp;\n    let i;\n    let tmp = [];\n\n    for (i=0; i<nr; i++) {\n      id = prod[i]['id'];\n      idName = prod[i]['idname'];\n      pricc = prices[i];\n      imgtmp = images[i];\n      imgsrc = API_SERVER + 'productphotos/' + imgtmp;\n      console.log (imgtmp);\n      tmp[i] = <div><div className=\"row\" key={id}><div className=\"col-md-4\"><img className=\"dyn\" src={imgsrc} /></div>\n      <div className=\"3\"><div className=\"lbtxtContainer\"><div className=\"lbtxt\">{idName}</div></div></div>\n      <div className=\"2\"><div className=\"lbtxtContainer\"><div className=\"lbtxt\">€{pricc}</div></div></div>\n      <div className=\"1\"><div className=\"lbtxtContainer\"><div className=\"lbtxt navCart\"><img onMouseEnter={this.trashHover} onMouseLeave={this.trashNormal} onClick={this.delProductFromCart} src={this.state.trash} /></div></div></div></div><hr /></div>\n    }\n    this.setState({ productRender: tmp });\n  }\n  addImages () {\n    let nr = this.state.inCart;\n    let prod = this.state.products;\n    let hlp;\n    let i;\n    for (i=0; i<nr; i++) {\n      hlp = prod[i]['idname'];\n      this.getImagesPrice (hlp);\n      console.log (hlp);\n    }\n  }\n  delProductFromCart (e) {\n    let id = e;\n    fetch(API_SERVER + 'listen.php?part=delproductfromcart&id=' + id + '&sessiontoken=' + session, {mode: 'no-cors'})\n    setTimeout(this.reload, 400);\n  }\n  reload () {\n    window.location.href = \"/chekout\";\n  }\n  trashHover () {\n    this.setState({ trash: './trash-b.png' });\n  }\n  trashNormal () {\n    this.setState({ trash: './trash.png' });\n  }\n\n  componentDidUpdate() {\n    this.getInCart();\n  }\n  componentDidMount() {\n    this.amILoggedIn();\n    this.getProductsInCart();\n    this.getInCart();\n    setTimeout(this.addImages, 250);\n    setTimeout(this.createProductRender, 1500);\n  }\n  render() {\n\t\treturn (\n\t\t\t<Container fluid>\n      <Header />\n        <Nav />\n        <Ping />\n        <div className=\"spacer50px\" />\n        <div className=\"row\">\n          <div className=\"col-md-12 ce capitalLetters\">\n            <h2><strong>Your Loved Pieces</strong></h2>\n          </div>\n        </div>\n        <div className=\"spacer25px\" />\n        <div className=\"row\">\n          <div className=\"col-md-2\" />\n          <div className=\"col-md-8\">\n            Cart / {this.state.inCart} items\n            <hr />\n            {this.state.productRender}\n          </div>\n          <div className=\"col-md-2\" />\n        </div>\n\n\n        <Footer />\n      </Container>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}